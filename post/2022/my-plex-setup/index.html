<!doctype html><html class=no-js lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>利用阿里云盘和plex，打造属于自己的在线流媒体 - SimonDing 的博客</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="利用阿里云盘和plex，打造属于自己的在线流媒体"><meta property="og:description" content="出差这段时间，自己的时间多了一些。最近利用这段时间，打造了一个自己的在线流媒体服务。使用效果还挺好，分享一下我的搭建方法 这件事情的起因是因为"><meta property="og:type" content="article"><meta property="og:url" content="https://simonding.com/post/2022/my-plex-setup/"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-12-07T23:55:45+00:00"><meta property="article:modified_time" content="2022-12-07T23:55:45+00:00"><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/custom.css><link rel="shortcut icon" href=/favicon.ico><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-106746611-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class=body><div class="container container--outer"><header class=header><div class=container><div class=logo><a class=logo__link href=/ title="SimonDing 的博客" rel=home><div class=logo__title>SimonDing 的博客</div><div class=logo__tagline>韶华易逝，只争朝夕</div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>菜单</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>主页</span></a></li><li class=menu__item><a class=menu__link href=https://www.instagram.com/simon_ding_/ target=_blank><span class=menu__text>Instagram</span></a></li><li class=menu__item><a class=menu__link href=https://500px.me/simonding target=_blank><span class=menu__text>500px</span></a></li><li class=menu__item><a class=menu__link href=/about/><span class=menu__text>关于</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>利用阿里云盘和plex，打造属于自己的在线流媒体</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2022-12-07T23:55:45>2022-12-07</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/%E7%94%9F%E6%B4%BB/ rel=category>生活</a></span></div><span class=meta__text>&emsp; 共 1225 字</span></div></header><div class="post__toc toc"><div class=toc__title>目录</div><div class=toc__menu><nav id=TableOfContents></nav></div></div><div class="content post__content clearfix"><p>出差这段时间，自己的时间多了一些。最近利用这段时间，打造了一个自己的在线流媒体服务。使用效果还挺好，分享一下我的搭建方法</p><p>这件事情的起因是因为了解到阿里云盘可以挂载成webdav形式，例如通过这个项目 <a href=https://github.com/messense/aliyundrive-webdav>aliyundrive-webdav</a> 可以让阿里云盘轻松支持webdav，我们都知道webdav是一个开放的协议，有了webdav支持，就可以做很多其他事情。</p><p>后来有了解到了一个更强大的项目 <a href=https://github.com/alist-org/alist>alist</a>，不紧支持阿里云盘webdav，还支持其他乱七八糟一系列网盘。下面是官网列出的一直支持的网盘</p><p><img src=https://img.simonding.com/2022/alist-backend.png alt=alist></p><p>alist不仅支持的网盘多，而且有web界面，还支持aria2离线下载。可以说功能非常全面了。</p><p>有个这个能使阿里云盘支持webdav的东西，我们就可以利用它做很多事了。alist部署在VPS上，然后再用rclone挂载成本地磁盘，然后plex直接指定rclone挂载的路径就行了，我们就拥有了一个在线流媒体服务，可以播放阿里云里的所有资源。</p><p>如果想加速世界各地的访问，还可以给plex套上cloudflare，所有流量都走cdn，而且还是免费的，爽歪歪！</p><p><img src=https://img.simonding.com/2022/plex-my.png alt=plex></p><p>这套搞成功之后还是挺舒服的，配合plex pass可以在各种客户端观看阿里云盘里的资源，还可以分享给女朋友利用plex的共同观看功能一直看，异地恋神器了有没有！</p><p><strong>中间遇到的一些坑</strong></p><ol><li><p>alist离线下载功能会丢失目录</p><p>这个不算什么大的bug，但是挺恼人的，导致我不太愿意用alist的离线下载功能。在看了看alist代码之后，发现这个问题也挺容易解决的，于是给项目提了个PR <a href=https://github.com/alist-org/alist/pull/2504>fix(aria2) #1856, solve directory issue</a>，把这个问题解决了。最新版应该都不存在这个问题了。</p></li><li><p>plex无法从视频中间开始继续播放，每次都要重头开始，虽然plex能记住进度，但是每次都无法成功恢复进度，而且视频播放的时候进度条无法正常拖动</p><p>这个问题挺讨厌的，每次看到一半，下次还要从头开始看，而且从头开始看进度条还不能拖动，属实让人头大了。这个问题搞了好长时间都不知道为啥，知道有一天在外网搜到了一个类似的问题，原来是cloudflare代理的问题导致的。<em>Caching</em> -> <em>Configuration</em>里面的<em>Caching Level</em>设置，不能用<em>Standard</em>，我试了下用我用<em>No query string</em>一切正常，用<em>Ignore query string</em>会导致移动端播放不了</p></li></ol><p>解决了这两个问题之后，这个服务才算真正好用。这样一般看电影分为两种方式：</p><ul><li>直接找阿里云盘分享，保存到阿里云盘里，plex刷新一下就能看到电影了。</li><li>自己找种子，利用alist的离线下载功能，由于服务器在国外，离线下载功能非常快，几乎全程10M/s+，一部电影几分钟就能下完，下完plex刷新下就能看到资源了，可以说是非常爽了</li></ul><p>这套软件大大简化了之前看电影了流程，基本上属于想看什么就立马能看到了，除了还有一个找资源的过程，不过大部分热门资源也很好找。</p><p>这个方案基本上可以做到1080p不卡，不用忍受国内视频网站阉割过后的电影，而且清晰度、流畅度也非常可以，目前可以说非常满意了。</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E7%94%9F%E6%B4%BB/ rel=tag>生活</a></li><li class=tags__item><a class="tags__link btn" href=/tags/%E6%8A%98%E8%85%BE/ rel=tag>折腾</a></li></ul></div></footer></article></main><div class="authorbox clearfix"><figure class=authorbox__avatar><img alt="Simon Ding avatar" src=/img/avatar.png class=avatar height=90 width=90></figure><div class=authorbox__header><span class=authorbox__name></span></div><div class=authorbox__description>韶华易逝，只争朝夕</div></div><nav class="post-nav flex"><div class="post-nav__item post-nav__item--prev"><a class=post-nav__link href=/post/2022/covi19-shanghai-2022-isolation/ rel=prev><span class=post-nav__caption>«&#8201;上一篇</span><p class=post-nav__post-title>上海封城隔离的日子</p></a></div></nav><section class=comments><script src=https://utteranc.es/client.js repo=simon-ding/blog-comment issue-term=pathname theme=github-light crossorigin=anonymous async></script></section></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2022 Simon Ding.
<span class=footer__copyright-credits>基于 <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> 引擎和 <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a>主題</span></div><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script>
<span id=busuanzi_container_site_pv>本站总访问量<span id=busuanzi_value_site_pv></span>次</span></div></footer></div><script async defer src=/js/menu.js></script>
<script src=/js/custom.js></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script></body></html>