---
title: "我自己的家里的网络环境"
date: 2019-02-22T00:36:02+08:00
lastmod: 2019-02-22T00:36:02+08:00
draft: false
keywords: []
description: ""
#tags: ["编程", "摄影"]
categories: ["生活"]
author: "simon"
---

至今在外租房已经有五六年了。每年都升级自己的电子设备，慢慢地也在搭建自己的网络环境。

目前家里的设备：

* MacBook Pro一台
* 小米8手机一部
* 一台iPad
* 一台自己搭建的NAS
* 一个路由器 Netgear WNDR4300

<!--more-->

自己所有的家庭网络服务都搭建在了NAS和路由器上。最近搬过好多次家，每次搬家都要扔掉好多东西，也有好多东西折旧处理掉了，但是这个NAS和网件的路由器一直还保留着。

自己组建NAS的好处就是可以花比较少的钱得到性能比较好的硬件，组建NAS的时候我也考虑过购买群晖的NAS，可无奈价格太贵，而且还是arm构架不方便扩展，还是决定要自己组建nas。

## NAS

现在我的nas的主要配置是：

* 万由的机箱，除系统盘外，有两个3.5英寸硬盘位
* 板载被动散热的J1900 CPU的主板
* 4G DDR3内存（从原来笔记本上拆下来的）
* 3TB硬盘，目前只有一块硬盘

### 系统

之前尝试了好多nas系统，都不是太满意，最后还是选择了在debian系统上自己搭建需要的服务。获得最大的灵活性。

先后尝试了的nas系统如下：

* OpenMediaVault 

第一个尝试的nas系统。debian based。各种插件也算比较丰富。

可是我发现我自己总是用不过它的web管理界面。而且有时候我喜欢用命令行操作一些东西，命令行操作容易使web管理界面出问题。还有就是它用的的debian系统比较老，个人比较喜欢稍微新一点的系统。由于以上的原因，最后还是放弃了这个发行版

* Rockstor

第一次听说这个发型版的时候还挺激动的，CentOS based、现代的web管理界面、使用最新的CentOS版本、开发也比较活跃。

于是我试了一下，可是由于是比较新的发行版，各种bug还比较多，web界面经常会直接罢工掉，遂作罢

* FreeNAS

老牌nas系统，稳定牛逼，可是硬件要求8G内存起步，没有这么多内存，而且自己也不熟悉bsd系统，就不去折腾了。

另外还有一些其他的小众系统，unRAID、nas4free等等，没有太多吸引我的地方。当然还可以选择黑群辉，但是太折腾了，就不想搞了。

本着自己动手，风衣足食的态度，还是自己手动搭建需要的服务吧。

### NAS上搭建的服务

来来回回在nas先后尝试了好多服务，现在依然在保留的：

1. transmission bt下载器，自己集成了[Transmission Web Control](https://github.com/ronggang/transmission-web-control)更好的webUI
2. Plex流媒体服务，用来看电视剧和电影的，但是发现自己用的并不是很多，现在主要是靠afp共享文件夹的形式访问nas的文件的
3. Sonarr电视剧下载服务，用来追剧的
4. aria2，用来下载东西
5. AFP服务器，共享文件用的。samba更通用些，但是最近改用了苹果电脑，所以尝试了用afp协议共享文件了
6. Time Machine服务器，用来备份Mac电脑的。前一段时间去修了次电脑，系统被重置了，然后就用Time Machine重新恢复成了和原来一模一样。极力推荐的一个服务，谁用说说好 :-) 


### 路由器

由于有了nas，路由器上就没有建太多服务了。

* ss翻墙
* NAS电源管理的服务

翻墙服务不用说了，居家旅行必备。

主要说一下NAS电源管理的服务。我白天要去上班，大部分时间是不在家的，NAS一直开着总感觉很浪费。于是我用Go语言写了个小程序，用来实现我离开家了时候把NAS关机，我回到家后把NAS打开。😆

具体实现原理很简单，就是检测我的手机有没有连到家里的无线网，有的话说明我在家就用Wake-On-Lan方式打开NAS；如果手机不在网络里的话，就ssh到nas上把nas关掉。

这个功能虽然很简单，但我却感觉超级自豪！第一次用程序解决了自己生活中的问题！

## 总结

家里的网络环境大概就是这样。写这篇文章的原因是自己刚在京东下单了一台华硕路由器(AC66U B1)，想借这个机会总结下家里的网络情况，也许也能对别人有所帮助